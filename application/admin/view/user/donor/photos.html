<!DOCTYPE html>
<html lang="en">
<head>
    <title>Home - Pre_screen</title>

    <!-- Page Head Start-->
    {include file="ws/css" /}
    <!-- Page Head Start-->

    <style>
        .ws_dis_no {
            display: none ;
        }
        .ws_prodess {
            margin-top: 5px;width: 70%
        }
        .page-wrapper.compact-wrapper .page-body-wrapper .page-body {
            margin-top: 24px;
        }
        .ws_jindu {
            display: flex;
            justify-content: space-between;
        }
        @media only screen and (min-width:768px) and (max-width:992px) {
            .ws_prodess_r {
                padding-left: 20px;
            }
        }
        /* phone */
        @media only screen and (max-width:767px) {
            .ws_prodess {
                margin-top: 5px;width: 55%
            }
            .ws_prodess_r {
                padding-left: 10px;
            }
        }
        .list-inline li {
            width: 125px;
        }
        .btn-trash {
            border-radius: 0px;
        }
        .ws_choose {
            margin-left: 10px !important;
            margin-top: 5px !important;
        }
    </style>
</head>
<body>
<!-- tap on top starts-->
<div class="tap-top"><i data-feather="chevrons-up"></i></div>
<!-- tap on tap ends-->

<!-- page-wrapper Start-->
<div class="page-wrapper compact-wrapper" id="pageWrapper">

    <!-- Page Body Start-->
    <div class="page-body-wrapper">


        <!-- Page content Start-->
        <div class="page-body">
            <div class="container-fluid">
                <div class="page-title">
                    <div class="row">
                        <div class="col-6">
                            <h3>Photos</h3>
                        </div>
                        <div class="col-6">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="{:url('user/donor/detail',['ids'=>$uid])}">
                                    <i data-feather="home"></i></a></li>
                                <li class="breadcrumb-item"><a href="{:url('user/donor/detail',['ids'=>$uid])}">Form</a></li>
                                <li class="breadcrumb-item active">Photos</li>
                            </ol>
                        </div>
                        <div class="col-12">

                            <div class="card-body progress-showcase">
                                <div class="ws_jindu">
                                    <div>
                                        {$form_number} required questions
                                    </div>
                                    <div class="col col-9 ws_prodess">
                                        <div class="progress">
                                            <div class="progress-bar bg-info" role="progressbar" style="width: {$lv}%"
                                                 aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"></div>
                                        </div>
                                    </div>
                                    <div class="ws_prodess_r">
                                        {if condition="$row"} {$row.form_complate_number}/{$form_number} complate
                                        {else}
                                        0/{$form_number} complate
                                        {/if}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Container-fluid starts-->
            <div class="container-fluid">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="card">
                            <div class="card-header pb-0">
                                <h3>Explain your Ethnicity/Race/Heritage </h3>
                                <span>
(Example: Caucasian_German1/2 and Irish 1/2)
                                </span>
                            </div>
                            <div class="card-body">
                                <form class="row g-3 " id="photos" method="POST" action="" role="form" onsubmit="return sumbit_sure()" >
                                    <input class="form-control" name="uid" type="hidden" value="{$uid}">
                                    <input class="form-control" id="form_complate_number" name="form_complate_number"
                                           type="hidden">
                                    <input class="form-control" name="status" type="hidden" value="0">
                                    <style>
                                        .card .card-body {
                                            padding:10px;
                                        }
                                    </style>
                                    <div class="card-header pb-0">
                                        <h4>Upload full body pictures *</h4>
                                    </div>
                                    <div class="card-body">
                                        <div class="col-md-6">
                                            <div class="input-group">
                                                <input id="c-images" class="form-control" size="50" name="full_images" type="text" data-rule="required"
                                                       {if condition="$row"} value="{$row.full_images|htmlentities}"{/if} >
                                                <div class="input-group-addon ws_choose no-border no-padding">
                                                    <span><button type="button" id="faupload-images" class="btn btn-warning faupload" data-input-id="c-images" data-mimetype="*" data-multiple="true" data-preview-id="p-images"><i class="fa fa-upload"></i>Upload</button></span>
                                                    <!--                                                        <span><button type="button" id="fachoose-images" class="btn btn-primary fachoose" data-input-id="c-images" data-mimetype="image/*" data-multiple="true"><i class="fa fa-list"></i> Choose</button></span>-->
                                                </div>
                                                <span class="msg-box n-right" for="c-images"></span>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <ul class="list-inline faupload-preview" id="p-images" ></ul>
                                        </div>
                                    </div>

                                    <div class="card-header pb-0">
                                        <h4>Upload 1-2 childhood pictures *</h4>
                                    </div>
                                    <div class="card-body">
                                        <div class="col-md-6">
                                            <div class="input-group">
                                                <input id="c-images2" class="form-control" size="50" name="child_images" type="text" data-rule="required"
                                                       {if condition="$row"} value="{$row.child_images|htmlentities}"{/if} >
                                                <div class="input-group-addon ws_choose no-border no-padding">
                                                    <span><button type="button" id="faupload-images2" class="btn btn-warning faupload" data-input-id="c-images2" data-mimetype="*" data-multiple="true" data-preview-id="p-images2"><i class="fa fa-upload"></i>Upload</button></span>
                                                </div>
                                                <span class="msg-box n-right" for="c-images2"></span>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <ul class="list-inline faupload-preview" id="p-images2" ></ul>
                                        </div>
                                    </div>

                                    <div class="card-header pb-0">
                                        <h4>Upload 1-2 short videos (within 30s) *</h4>
                                    </div>
                                    <div class="card-body">
                                        <div class="col-md-6">
                                            <div class="input-group">
                                                <input id="c-images3" class="form-control" size="50" name="video_images" type="text" data-rule="required"
                                                       {if condition="$row"} value="{$row.video_images|htmlentities}"{/if} >
                                                <div class="input-group-addon ws_choose no-border no-padding">
                                                    <span><button type="button" id="faupload-images3" class="btn btn-warning faupload" data-input-id="c-images3" data-mimetype="*" data-multiple="true" data-preview-id="p-images3"><i class="fa fa-upload"></i>Upload</button></span>
                                                </div>
                                                <span class="msg-box n-right" for="c-images3"></span>
                                            </div>
                                        </div>
                                        <div class="col-md-8">
                                            <ul class="list-inline faupload-preview" id="p-images3" ></ul>
                                        </div>
                                    </div>

                                    <div class="col-12" style="margin-left: 25px;">
                                        <button class="btn btn-primary" type="submit">Save</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Container-fluid Ends-->
        </div>
    </div>

    <!-- Container-fluid Ends-->
</div>
<!-- Page content Ends-->

</div>



</div>

<!-- Page js Start-->
{include file="ws/js" /}
<!-- Page js Ends -->

</body>
<script>

    function sumbit_sure(){
        var parmas = $("#photos").find("input");
        var name_arr = ['full_images','video_images'];
        var j = 0;// 表单未完成数量
        var arr = [];// 表单未完成数组
        for(i=0;i<parmas.length;i++){
            var value = parmas[i].value;
            var name = $(parmas[i]).attr('name');
            if (name_arr.includes(name)&&value.length==0){
                j++;
                one = $(parmas[i]).attr('ws-text');
                arr.push(one);
            }
        }
        $('#form_complate_number').val(j);

        var html = "Are you sure you want to exit？\n";
        if (j>0){
            html += j+" mandatory field\n";
            if(j==1){
                html += "'"+arr[0]+"'\n," ;

            }else if(j==2){
                html += "'"+arr[0]+"',\n" ;
                html += "'"+arr[1]+"',\n" ;
            }else{
                html += "'"+arr[0]+"',\n" ;
                html += "'"+arr[1]+"',\n" ;
                html += "'"+arr[2]+"'...\n" ;
            }
            html += "Not filled in.\n";
            html += "\n";
        }

        html += "Please fill in relevant information.";

        var gnl=confirm(html);
        if (gnl==true){
            if (j==0){
                return true;
            }else {
                return false;
            }

        }else{
            return false;
        }
    }

</script>
</html>
